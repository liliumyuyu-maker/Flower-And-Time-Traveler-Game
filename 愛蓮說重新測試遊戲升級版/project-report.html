<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>胡淨羽老師的AI協作教育專案：《花與時旅人》完整報告</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg: linear-gradient(135deg, #fef3e2 0%, #fae8d4 100%);
            --sidebar-bg: #ffffff;
            --content-bg: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --accent-brand: #6366f1;
            --accent-green: #10b981;
            --accent-yellow: #f59e0b;
            --accent-pink: #ec4899;
            --border-light: #f1f5f9;
            --shadow: 0 8px 32px rgba(0, 0, 0, .06);
            --radius: 24px;
        }

        body {
            font-family: "Noto Sans TC", "Microsoft JhengHei", sans-serif;
            background: var(--bg);
            color: var(--text-primary);
            line-height: 1.8;
        }

        .main-wrapper {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            box-shadow: 2px 0 12px rgba(0, 0, 0, .08);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 32px 24px 24px;
            border-bottom: 2px solid var(--border-light);
            position: sticky;
            top: 0;
            background: var(--sidebar-bg);
            z-index: 10;
        }

        .sidebar-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .sidebar-subtitle {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .nav-section {
            padding: 16px 0;
        }

        .nav-section-title {
            padding: 8px 24px;
            font-size: 12px;
            font-weight: 700;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .nav-item {
            padding: 10px 24px 10px 20px;
            color: #475569;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 4px solid transparent;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .nav-item.sub-item {
            padding-left: 40px;
            font-size: 14px;
        }

        .nav-item:hover {
            background: #f8fafc;
            color: var(--accent-brand);
        }

        .nav-item.active {
            background: #eef2ff;
            color: var(--accent-brand);
            border-left-color: var(--accent-brand);
            font-weight: 600;
        }

        .nav-item-icon {
            font-size: 16px;
            width: 20px;
            text-align: center;
        }

        .content-area {
            margin-left: 280px;
            flex: 1;
            padding: 40px;
        }

        .content-section {
            background: var(--content-bg);
            border-radius: var(--radius);
            padding: 48px;
            margin: 0 auto;
            max-width: 900px;
            box-shadow: var(--shadow);
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1,
        h2,
        h3,
        h4 {
            color: var(--text-primary);
            margin: 0;
        }

        h1 {
            font-size: 36px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 3px solid var(--accent-yellow);
        }

        h2 {
            font-size: 28px;
            margin: 36px 0 16px;
        }

        h3 {
            font-size: 20px;
            color: #334155;
            margin: 24px 0 12px;
            padding-left: 16px;
            border-left: 4px solid var(--accent-green);
        }

        p {
            margin-bottom: 16px;
        }

        ul,
        ol {
            margin: 16px 0 16px 24px;
        }

        li {
            margin-bottom: 10px;
        }

        .box {
            background: #f8fafc;
            border-left: 4px solid var(--accent-brand);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .box strong {
            color: var(--accent-brand);
        }

        .timeline {
            border-left: 3px solid var(--border-light);
            padding-left: 20px;
            margin-left: 8px;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -28px;
            top: 5px;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: var(--accent-brand);
            border: 3px solid #eef2ff;
        }

        .timeline-title {
            font-weight: 700;
            font-size: 16px;
        }

        .timeline-meta {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .timeline-content {
            font-size: 15px;
            margin-top: 8px;
        }

        .code {
            font-family: "SF Mono", monospace;
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }

        .card h4 {
            font-size: 18px;
            margin-bottom: 8px;
        }

        .card p {
            font-size: 15px;
            color: var(--text-secondary);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th,
        td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        th {
            background: #f8fafc;
            font-weight: 700;
            font-size: 14px;
        }

        tr:hover td {
            background: #fafafa;
        }

        a.button {
            display: inline-block;
            padding: 12px 24px;
            background: var(--accent-brand);
            color: white;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s;
        }

        a.button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, .1);
        }

        .mobile-menu-btn,
        .mobile-overlay {
            display: none;
        }

        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0;
                padding: 80px 20px 40px;
            }

            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 2000;
                background: white;
                border: none;
                border-radius: 12px;
                padding: 12px 16px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
                cursor: pointer;
                font-size: 24px;
            }

            .mobile-overlay.show {
                display: block;
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }
        }

        @media print {
            body {
                background: white;
                padding: 20px;
            }

            .main-wrapper {
                display: block;
            }

            .sidebar,
            .mobile-menu-btn {
                display: none;
            }

            .content-area {
                margin-left: 0;
                padding: 0;
            }

            .content-section {
                display: block !important;
                box-shadow: none;
                border-bottom: 2px solid #ccc;
                page-break-after: always;
                padding: 20px 0;
            }

            h1 {
                font-size: 28px;
            }

            h2 {
                font-size: 24px;
            }

            a.button {
                display: none;
            }
        }
    </style>
</head>

<body>

    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">☰</button>
    <div class="mobile-overlay" onclick="toggleMobileMenu()"></div>

    <div class="main-wrapper">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">《花與時旅人》</div>
                <div class="sidebar-subtitle">完整專案報告</div>
            </div>

            <div class="nav-section">
                <div class="nav-item active" onclick="showSection(event, 'overview')">
                    <span class="nav-item-icon">⭐</span> 專案總覽
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'achievements')">
                    <span class="nav-item-icon">✨</span> 成果速覽
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'origin')">
                    <span class="nav-item-icon">💡</span> 創作緣起
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-item" onclick="showSection(event, 'game')">
                    <span class="nav-item-icon">🕹️</span> 遊戲本體
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'gameplay')">
                    <span class="nav-item-icon">🎯</span> 核心玩法
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'design')">
                    <span class="nav-item-icon">🎨</span> 設計理念
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'products')">
                    <span class="nav-item-icon">🔗</span> 最終成品
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-item" onclick="showSection(event, 'collaboration')">
                    <span class="nav-item-icon">🤖</span> 人機協作歷程
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'devlog')">
                    <span class="nav-item-icon">🚀</span> 從0到1的開發日誌
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'analysis')">
                    <span class="nav-item-icon">🤝</span> AI 協作模式分析
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-item" onclick="showSection(event, 'pedagogy')">
                    <span class="nav-item-icon">👨‍🏫</span> 教學應用
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'guide')">
                    <span class="nav-item-icon">📖</span> 課堂引導指南
                </div>
                <div class="nav-item sub-item" onclick="showSection(event, 'assessment')">
                    <span class="nav-item-icon">📊</span> 評量建議
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-item" onclick="showSection(event, 'future')">
                    <span class="nav-item-icon">🚀</span> 未來展望
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-item" onclick="showSection(event, 'tech')">
                    <span class="nav-item-icon">📄</span> 技術文件
                </div>
            </div>
        </nav>

        <main class="content-area">

            <section id="overview" class="content-section active">
                <h1>⭐ 專案總覽</h1>
                <div id="achievements">
                    <h2>✨ 成果速覽</h2>
                    <p>《花與時旅人》是一個結合古典文學、價值思辨與多人互動的網頁遊戲。在AI的協作下，於兩週內從零開始，完成了一個功能完整、體驗流暢、且具備高度教育意義的「展示級作品」。</p>
                    <div class="grid">
                        <div class="card">
                            <h4>🕹️ 完整遊戲體驗</h4>
                            <p>包含單人養成、多人即時互動、排行榜、留言與報告匯出等完整功能。</p>
                        </div>
                        <div class="card">
                            <h4>📱 跨平台設計</h4>
                            <p>採用響應式設計與專屬手機HUD，在電腦與手機上都能流暢遊玩。</p>
                        </div>
                        <div class="card">
                            <h4>🤖 人機共創典範</h4>
                            <p>由教師主導，AI擔任架構師、顧問、工程師，展現了AI協作在教育創新的巨大潛力。</p>
                        </div>
                    </div>
                </div>
                <div id="origin">
                    <h2>💡 創作緣起</h2>
                    <p>這一切，始於一段長達14年的教學旅程後的疲憊與反思。</p>
                    <p>在育嬰假期間，我暫時離開了那個讓我感到不斷被「消耗」的教室。我熱愛教學，也自認能兼顧「經師」與「人師」的角色，但學生的反應卻常常讓我感到無力。直到我開始嘗試製作
                        Podcast，意外地發現，我的聲音與思想，在教室外找到了更廣闊的聽眾，甚至有許多非文科背景的聽眾告訴我，內容「講到了心裡」。</p>
                    <p>這個發現，加上與AI的對話，讓我豁然開朗：**我真正在乎的，一直是「傳播」**——如何將思想與感動，用最有效、最能引發共鳴的方式傳遞出去。</p>
                    <p>《花與時旅人》便是在這樣的背景下誕生的。它是我作為一名「教育傳播者」，與AI協作，試圖回答「在新的時代，如何讓文學的價值被聽見？」這個問題的首次嘗試。這不僅是一個遊戲，更是我教學理念的延伸，和我個人轉型的起點。
                    </p>
                </div>
            </section>

            <section id="game" class="content-section">
                <h1>🕹️ 遊戲本體</h1>
                <div id="gameplay">
                    <h2>🎯 核心玩法</h2>
                    <p>遊戲分為兩大階段：</p>
                    <ol>
                        <li><strong>單人旅程 (20回合)：</strong>
                            玩家擲骰子在7x7的環狀棋盤上移動，透過經歷隨機事件、在市場買賣花卉，來累積「花幣、經驗、文思」三大資源，並形塑「榮耀、自守、自在」三種人格特質。</li>
                        <li><strong>多人雅集：</strong>
                            單人旅程結束後，玩家會根據最高屬性生成一份「愛Ｏ說」創作草稿。上傳後，所有在同一房間的玩家，可以即時看到彼此的作品，並用自己賺取來的花幣，為欣賞的作品投資、留言，進行一場價值的交流與碰撞。
                        </li>
                    </ol>
                </div>
                <div id="design">
                    <h2>🎨 設計理念</h2>
                    <p>《花與時旅人》希望透過遊戲化的方式，讓學生在輕鬆的氛圍中：</p>
                    <ul>
                        <li>體驗古典文學中的品格選擇</li>
                        <li>理解〈愛蓮說〉等作品的深層意涵</li>
                        <li>練習根據個人經歷創作「愛Ｏ說」</li>
                        <li>學習欣賞與評論他人作品</li>
                        <li>培養同儕互動與正向回饋的能力</li>
                    </ul>
                </div>
                <div id="products">
                    <h2>🔗 最終成品</h2>
                    <p>本專案最終產出了兩份可獨立運作的數位成品：</p>
                    <div style="display:flex; gap: 20px; margin-top: 20px;">
                        <a href="https://whichflowergame.netlify.app/" target="_blank" class="button">體驗遊戲 &raquo;</a>
                        <a href="https://whichflowergamemanual.netlify.app/" target="_blank" class="button">閱讀互動說明書
                            &raquo;</a>
                    </div>
                </div>
            </section>

            <section id="collaboration" class="content-section">
                <h1>🤖 人機協作歷程</h1>
                <div id="devlog">
                    <h2>🚀 從0到1的開發日誌</h2>
                    <p>本專案在極短的時間內完成，仰賴高強度的人機協作。以下是我們解決關鍵技術問題的歷程：</p>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-title">Firebase 連線錯誤</div>
                            <div class="timeline-meta">錯誤訊息：<code class="code">Firebase config not found</code></div>
                            <div class="timeline-content">最初的挑戰。透過在 `index.html` 中手動注入 Firebase 設定檔，成功讓前端與後端建立第一次的連結。
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-title">使用者驗證失敗</div>
                            <div class="timeline-meta">錯誤訊息：<code class="code">auth/configuration-not-found</code></div>
                            <div class="timeline-content">意識到需要在 Firebase 後台手動啟用「匿名登入」服務，為所有玩家賦予了獨一無二的臨時身份。</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-title">資料庫寫入被拒</div>
                            <div class="timeline-meta">錯誤訊息：<code class="code">400 (Bad Request)</code></div>
                            <div class="timeline-content">發現光有專案不夠，還必須在 Firestore 中「建立資料庫」並設定「安全規則」。我們從最寬鬆的 `allow read,
                                write: if true;` 開始，讓遊戲得以運作。</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-title">安全性升級</div>
                            <div class="timeline-meta">目標：防止惡意操作</div>
                            <div class="timeline-content">
                                將安全規則從完全開放，升級為只允許「已登入使用者」操作，並加入了「只允許作者刪除自己作品」、「不允許自己投自己票」等進階規則，確保了遊戲的公平性。</div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-title">功能迭代與優化</div>
                            <div class="timeline-meta">目標：提升遊戲體驗</div>
                            <div class="timeline-content">
                                在核心功能穩定後，我們密集地進行了優化：新增了環狀棋盤、擴充了事件卡、加入了新手導覽、實作了留言與匯出報告功能、並完成了響應式與手機版 HUD 設計。</div>
                             <div class="timeline-item">
                            <div class="timeline-title">內容深化與文件化</div>
                            <div class="timeline-meta">目標：提升教育價值與專案完整性</div>
                            <div class="timeline-content">
                                在遊戲核心穩定後，專案進入了內容深化階段。我們加入了更多如范仲淹、佛印等歷史人物的事件，並優化了所有事件的文案使其更貼近學生的認知。最終，完成了精美的互動式說明書與完整的專案報告，為專案畫上了完美的句點。
                            </div>
                        </div>
                    </div>
                </div>
                <div id="analysis">
                    <h2>🤝 AI 協作模式分析</h2>
                    <p>在此專案中，人類與 AI 形成了一個高效的敏捷開發團隊，各自扮演了不可或缺的角色：</p>
                    <div class="grid">
                        <div class="card">
                            <h4>👩‍🏫 總監 (Director) - 我 (胡淨羽老師)</h4>
                            <p>負責提出教育願景、核心玩法、內容需求，並在 AI 提供多種方案時，做出最終決策與整合。同時也擔任了最終的測試與品質把關者。</p>
                        </div>
                        <div class="card">
                            <h4>🤖 架構師 & 技術顧問 (Architect & TA) - Gemini</h4>
                            <p>負責在專案初期規劃整體程式架構、提供核心程式碼範例、解釋複雜的技術概念（如 Firebase 安全規則），並在我遇到 Bug 時，提供系統性的除錯思路。</p>
                        </div>
                        <div class="card">
                            <h4>🤖 策略顧問 & 文件工程師 (Strategist & Doc. Engineer) - Claude、Chat-GPT</h4>
                            <p>負責從宏觀角度分析專案潛力、規劃未來發展藍圖（如桌遊版、擴充版），並擅長將複雜的遊戲內容，整理成結構清晰、視覺精美的說明文件與報告。</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="pedagogy" class="content-section">
                <h1>👨‍🏫 教學應用</h1>

                <div id="guide">
                    <h2>📖 課堂引導指南</h2>
                    <div class="box">
                        <div style="font-size: 18px; font-weight: 700; color: #166534; margin-bottom: 12px;">📚 建議的課堂流程
                        </div>
                        <ol style="margin-top: 12px;">
                            <li><strong>課前說明（5分鐘）：</strong>「今天我們要一起進入雅集 #1234，上傳後請<strong>先不要離開</strong>」</li>
                            <li><strong>進行中（15-20分鐘）：</strong>「已經上傳的同學，請留在雅集畫面等待其他同學」</li>
                            <li><strong>確認完成：</strong>「還有誰沒上傳的請舉手」→ 確認全部上傳</li>
                            <li><strong>互動時間（10分鐘）：</strong>「現在大家可以互相投資和留言了」</li>
                            <li><strong>匯出報告：</strong>「時間到，現在請大家點『匯出報告』下載」</li>
                            <li><strong>結束：</strong>「確認大家都下載好了嗎？現在可以點『離開雅集』了」</li>
                        </ol>

                        <h3 style="margin-top: 24px; border-color: var(--accent-brand);">✨ 教師專用：觀戰模式</h3>
                        <p style="margin-top: 12px;">為了方便老師巡視各組進度與統一匯出報告，遊戲內建了隱藏的「觀戰模式」，可以讓您跳過20回合的遊戲過程，直接進入任何一個雅集。</p>
                        <ol>
                            <li>在遊戲大廳的「<strong>你的名號</strong>」欄位中，輸入通關密語：<code>為維護遊戲隱私請寄信至liliumyuyu@gmail.com詢問</code></li>
                            <li>輸入正確後，「<strong>觀戰雅集</strong>」的按鈕就會自動出現。</li>
                            <li>接著輸入您想觀戰的「<strong>雅集編號</strong>」，點擊「觀戰雅集」即可進入。</li>
                        </ol>
                    </div>
                </div>

                <div id="assessment">
                    <h2>📊 評量建議</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>評量項目</th>
                                <th>說明</th>
                                <th>建議佔分</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>參與度</td>
                                <td>是否完整參與遊戲與互動</td>
                                <td>30%</td>
                            </tr>
                            <tr>
                                <td>創作品質</td>
                                <td>上傳作品的完整性與創意</td>
                                <td>40%</td>
                            </tr>
                            <tr>
                                <td>互動回饋</td>
                                <td>給予他人的留言品質</td>
                                <td>30%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="future" class="content-section">
                <h1>🚀 未來展望</h1>
                <p>本專案展現了巨大的潛力，未來可朝三個方向繼續發展：</p>
                <div class="grid">
                    <div class="card">
                        <h4>🌱 數位版優化 (師生接力開發)</h4>
                        <p>將遊戲的後續開發，轉化為學生的專題式學習(PBL)課程，分設程式、美術、文案、測試組，共同為遊戲增加新功能（如聊天室、成就系統等）。</p>
                    </div>
                    <div class="card">
                        <h4>🎲 實體桌遊版 (文創產品)</h4>
                        <p>將遊戲機制實體化，設計圖板、卡牌、代幣，成為一套可供更多班級使用的教學工具，甚至具備商業出版的潛力。</p>
                    </div>
                    <div class="card">
                        <h4>🌌 主題擴充宇宙 (知識IP)</h4>
                        <p>將核心玩法延伸至其他古典文學主題，如「國中古文觀止」、「詩詞大會」、「女性文學專場」等，打造一個《花與時旅人》的知識宇宙。</p>
                    </div>
                </div>
            </section>

            <section id="tech" class="content-section">
                <h1>📄 技術文件</h1>
                <h2>📁 檔案結構</h2>
                <table>
                    <thead>
                        <tr>
                            <th>檔案名稱</th>
                            <th>主要功能</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>index.html</code></td>
                            <td>遊戲的主體架構，包含所有畫面區塊與腳本載入。</td>
                        </tr>
                        <tr>
                            <td><code>style.css</code></td>
                            <td>負責遊戲的所有視覺樣式、排版、動畫與響應式設計。</td>
                        </tr>
                        <tr>
                            <td><code>game-state.js</code></td>
                            <td>定義遊戲開始時，玩家、市場與遊戲狀態的初始數據。</td>
                        </tr>
                        <tr>
                            <td><code>game-data.js</code></td>
                            <td>存放遊戲的核心靜態數據，如棋盤佈局、路徑與所有事件卡的內容。</td>
                        </tr>
                        <tr>
                            <td><code>firebase-manager.js</code></td>
                            <td>負責與 Firebase 後端的所有通訊，包括使用者驗證、資料庫的讀寫與即時監聽。</td>
                        </tr>
                        <tr>
                            <td><code>ui-manager.js</code></td>
                            <td>使用者介面總管，負責所有畫面的繪製、更新與互動，如棋盤、儀表板、彈出視窗等。</td>
                        </tr>
                        <tr>
                            <td><code>main.js</code></td>
                            <td>遊戲的核心引擎，負責串連所有模組，掌管遊戲的主要流程與邏輯。</td>
                        </tr>
                    </tbody>
                </table>
                <h2>🔧 如何擴充</h2>
                <p>若要擴充遊戲內容，最簡單的方式是修改 <strong><code>game-data.js</code></strong> 檔案：</p>
                <ul>
                    <li><strong>新增事件：</strong> 在 `extraEvents` 陣列中，依照現有格式，加入新的事件物件即可。程式會自動將其併入遊戲中。</li>
                    <li><strong>修改棋盤：</strong> 調整 `boardLayout` 與 `boardPath` 陣列，並在 `style.css` 中對應修改 `.game-board` 的
                        `grid-template-columns` 與 `grid-template-rows`，即可改變棋盤大小與路徑。</li>
                </ul>
            </section>

        </main>
    </div>

    <script>
        function showSection(event, sectionId) {
            const allSections = document.querySelectorAll('.content-section');
            const allNavItems = document.querySelectorAll('.nav-item');

            // 1) 找到目標區塊與其「所屬的大章節 section」
            const target = document.getElementById(sectionId);
            if (!target) return;

            const topSection = target.closest('.content-section') || target;

            // 2) 先關掉所有章節，再顯示當前大章節
            allSections.forEach(s => { s.style.display = 'none'; s.classList.remove('active'); });
            topSection.style.display = 'block';
            topSection.classList.add('active');

            // 3) 捲動到目標子區塊（如果它是大章節本身，就會直接到頂）
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });

            // 4) 更新選單高亮：清空 → 標記當前點擊項目 + 對應父層主選單
            allNavItems.forEach(i => i.classList.remove('active'));
            if (event && event.currentTarget && event.currentTarget.classList.contains('nav-item')) {
                event.currentTarget.classList.add('active');
                // 嘗試同時高亮對應的大章節主選單（不是 sub-item 的那個）
                const parentNavItem = event.currentTarget.closest('.nav-section').querySelector('.nav-item:not(.sub-item)');
                if (parentNavItem) parentNavItem.classList.add('active');
            }

            // 5) 更新網址 hash（讓分享/返回有效）
            if (history.pushState) {
                history.pushState(null, null, '#' + sectionId);
            } else {
                location.hash = sectionId;
            }

            // 6) 手機：點擊後關閉側欄
            if (window.innerWidth <= 1024) toggleMobileMenu(false);
        }

        function toggleMobileMenu(forceOpen) {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.querySelector('.mobile-overlay');
            if (typeof forceOpen === 'boolean') {
                sidebar.classList.toggle('open', forceOpen);
                overlay.classList.toggle('show', forceOpen);
            } else {
                sidebar.classList.toggle('open');
                overlay.classList.toggle('show');
            }
        }

        // 7) 根據網址 #hash 自動開啟相對應章節／子段
        window.addEventListener('DOMContentLoaded', () => {
            // 預設高亮第一個主選單
            const firstNavItem = document.querySelector('.nav-item:not(.sub-item)');
            if (firstNavItem) firstNavItem.classList.add('active');

            const id = decodeURIComponent(location.hash.replace('#', ''));
            if (id && document.getElementById(id)) {
                const targetNav = Array.from(document.querySelectorAll('.nav-item'))
                    .find(i => i.getAttribute('onclick') && i.getAttribute('onclick').includes(`'${id}'`));
                showSection({ currentTarget: targetNav }, id);
            } else {
                const overview = document.getElementById('overview');
                if (overview) {
                    overview.style.display = 'block';
                    overview.classList.add('active');
                }
            }
        });
    </script>

</body>


</html>
